<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100 Days of Code - Day 3</title>
    <meta name="Description" content="Day 3!">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="Dev Blog">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">Dev Blog</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/about/">About Me</a></li>
      </ul>
    </header>

    <main class="tmpl-post">

      <h1>100 Days of Code - Day 3</h1>

<h3 id="day-3%3A-may-14%2C-2020">Day 3: May 14, 2020 <a class="direct-link" href="#day-3%3A-may-14%2C-2020">#</a></h3>
<h4 id="today's-progress">Today's Progress <a class="direct-link" href="#today's-progress">#</a></h4>
<p>Today I completed closure, composition, and immutability from Kyle's <a href="https://frontendmasters.com/courses/functional-javascript-v3/">Functional-Light JavaScript</a>.</p>
<h4 id="thoughts">Thoughts <a class="direct-link" href="#thoughts">#</a></h4>
<p>I didn't <em>really</em> know what functional JavaScript was all about and but now I have a hint. I wish I could say it came easier than it did but I know it will come with time.</p>
<h4 id="work-examples">Work examples <a class="direct-link" href="#work-examples">#</a></h4>
<h5 id="closure">Closure <a class="direct-link" href="#closure">#</a></h5>
<p>Closure is when a function 'remembers' the variables around it even when that function is executed elsewhere. If we leverage closure in functional programming, we have to be sure we're closing over non-changing (mutating) values:</p>
<pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><span class="token keyword">function</span> <span class="token function">makeCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token operator">++</span>counter<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">makeCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// c is not a pure function because passing the same inputs</span><br><span class="token comment">// produces different outputs</span><br><span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span><br><span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span><br><span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span></code></pre>
<pre class="language-js"><code class="language-js"><span class="token comment">// we have closure over z which is a constant</span><br><span class="token keyword">function</span> <span class="token function">addAnother</span><span class="token punctuation">(</span><span class="token parameter">z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">addTwo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token keyword">var</span> add1 <span class="token operator">=</span> <span class="token function">addAnother</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add1</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span></code></pre>
<p>Closure challenge:</p>
<ol>
<li>Modify <code>strBuilder(..)</code> so that it can take a string and return back a function.</li>
</ol>
<p><strong>Note:</strong> For purposes of this exercise, assume that <code>strBuilder(..)</code> itself is always called with a string initially.</p>
<ol start="2">
<li>
<p>For each call to a function here, if a string is passed, a function should be returned.</p>
</li>
<li>
<p>If a non-string is passed (such as passing no argument), a string value should be returned, which is the concatenation of all the passed in strings.</p>
</li>
<li>
<p>Hints:</p>
</li>
</ol>
<ul>
<li>
<p>You can use <code>typeof foo == &quot;string&quot;</code> to test if <code>foo</code> is a string.</p>
</li>
<li>
<p>Look at the test cases at the bottom of the exercise file to clarify any questions about expected behavior.</p>
</li>
<li>
<p>Ensure your function(s) are pure. Avoid mutating a closed over variable, which would be a side-effect.</p>
</li>
</ul>
<p>Solution:</p>
<pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token comment">// we can't do it this way because we mutate str</span><br><span class="token comment">// function strBuilder(str) {</span><br><span class="token comment">//   return function next(v) {</span><br><span class="token comment">//     if (typeof v == 'string') {</span><br><span class="token comment">//       str += v;</span><br><span class="token comment">//       return next;</span><br><span class="token comment">//     }</span><br><span class="token comment">//     return str;</span><br><span class="token comment">//   };</span><br><span class="token comment">// }</span><br><br><span class="token comment">// Here, we have closure over str and we never mutate it</span><br><span class="token keyword">function</span> <span class="token function">strBuilder</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> v <span class="token operator">==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token function">strBuilder</span><span class="token punctuation">(</span>str <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> str<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// ---------------------------------------------</span><br><span class="token keyword">var</span> hello <span class="token operator">=</span> <span class="token function">strBuilder</span><span class="token punctuation">(</span><span class="token string">'Hello, '</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> kyle <span class="token operator">=</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">'Kyle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> susan <span class="token operator">=</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">'Susan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> question <span class="token operator">=</span> <span class="token function">kyle</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> greeting <span class="token operator">=</span> <span class="token function">susan</span><span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">strBuilder</span><span class="token punctuation">(</span><span class="token string">'Hello, '</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'Kyle'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Hello, Kyle.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Hello, '</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">kyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Hello, Kyle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">susan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Hello, Susan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>question <span class="token operator">===</span> <span class="token string">'Hello, Kyle?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token operator">===</span> <span class="token string">'Hello, Susan!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h5 id="memoization">Memoization <a class="direct-link" href="#memoization">#</a></h5>
<p>When writing a function, where we locate (write) the work, determines when it will happen. We can write a function that's eager or lazy.</p>
<pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">lazyRepeater</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">allTheAs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Writing the padStart here allows us to defer the work</span><br>    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token keyword">var</span> <span class="token constant">A10</span> <span class="token operator">=</span> <span class="token function">lazyRepeater</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// The actual work of executing the function doesn't occur until we call A10();</span><br><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">A10</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// AAAAAAAAAA</span><br><br><span class="token keyword">function</span> <span class="token function">eagerRepeater</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// writing this line here makes this function eager</span><br>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">allTheAs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>    <span class="token keyword">return</span> str<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> <span class="token constant">A20</span> <span class="token operator">=</span> <span class="token function">eagerRepeater</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token function">l</span><span class="token punctuation">(</span><span class="token constant">A20</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The benefit of lazy is we can defer the expensive execution until we're sure we need to call the function (i.e. conditional execution).</p>
<p>The benefit of eager is we only have to do the work once.</p>
<p>We can use <a href="https://ramdajs.com/docs/#memoizeWith">memoization</a> to get the best of both worlds. Memoization allows us to cache the return value of an expensive function call. We need to make sure our function will benefit from memoization though--there's a memory cost to utilizing an internal cache.</p>


<p><a href="/blog/">← Home</a></p>

    </main>

    <footer></footer>

    <!-- Current page: /blog/posts/may-14-2020/ -->
  </body>
</html>
