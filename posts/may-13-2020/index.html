<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100 Days of Code - Day 2</title>
    <meta name="Description" content="Day 2!">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="Dev Blog">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">Dev Blog</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/about/">About Me</a></li>
      </ul>
    </header>

    <main class="tmpl-post">

      <h1>100 Days of Code - Day 2</h1>

<h3 id="day-2%3A-may-13%2C-2020">Day 2: May 13, 2020 <a class="direct-link" href="#day-2%3A-may-13%2C-2020">#</a></h3>
<h4 id="today's-progress">Today's Progress <a class="direct-link" href="#today's-progress">#</a></h4>
<p>Today I completed Kyle Simpson's <a href="https://frontendmasters.com/courses/js-recent-parts/">JavaScript: The Recent Parts</a> and started his other course, <a href="https://frontendmasters.com/courses/functional-javascript-v3/">Functional-Light JavaScript, v3</a>.</p>
<h4 id="thoughts">Thoughts <a class="direct-link" href="#thoughts">#</a></h4>
<p>Working through the regular expressions section of Recent Parts was...work. I don't have a need to use reg ex in my day-to-day and it's been too long since I first learned them on <a href="https://www.freecodecamp.org/">freeCpdeCamp</a>.</p>
<p>I really enjoyed learning about async generators but I'll need to work with them more before I feel comfortable using them.</p>
<p>Kyle's <a href="https://frontendmasters.com/courses/functional-javascript-v3/">Functional-Light course</a> is a great intro to the functional paradigm and I feel so grateful for his course on the topic. His topics on <em>function purity</em> and <em>argument adapters</em> clicked right away but went downhill quick when we hit <em>point free</em> functions.</p>
<h4 id="work-examples">Work examples <a class="direct-link" href="#work-examples">#</a></h4>
<h5 id="regular-expressions-dotall-mode">Regular Expressions dotall mode <a class="direct-link" href="#regular-expressions-dotall-mode">#</a></h5>
<pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>The quick brown fox<br>jumps over the<br>lazy dog</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>msg<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/brown.*over/</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null because .* won't match across multiple lines</span><br>msg<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/brown.*over/s</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h5 id="async-challenge">Async challenge <a class="direct-link" href="#async-challenge">#</a></h5>
<p>we want to request a series of files concurrently but we don't want to print them in the specific order we requested them. We also want to print them as soon as they come back (so we can't use <code>Promise.all()</code> to wait for all of the promises to resolve.</p>
<p>Solution:</p>
<pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><span class="token keyword">function</span> <span class="token function">getFile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">fakeAjax</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loadFiles</span><span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> promises <span class="token operator">=</span> files<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">getFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> promise <span class="token keyword">of</span> promises<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> promise<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token function">loadFiles</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'file1'</span><span class="token punctuation">,</span> <span class="token string">'file2'</span><span class="token punctuation">,</span> <span class="token string">'file3'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// **************************************</span><br><br><span class="token keyword">function</span> <span class="token function">fakeAjax</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> fake_responses <span class="token operator">=</span> <span class="token punctuation">{</span><br>    file1<span class="token operator">:</span> <span class="token string">'The first text'</span><span class="token punctuation">,</span><br>    file2<span class="token operator">:</span> <span class="token string">'The middle text'</span><span class="token punctuation">,</span><br>    file3<span class="token operator">:</span> <span class="token string">'The last text'</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token keyword">var</span> randomDelay <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1e4</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">8000</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1000</span><span class="token punctuation">;</span><br><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Requesting: '</span> <span class="token operator">+</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">cb</span><span class="token punctuation">(</span>fake_responses<span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span> randomDelay<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h5 id="async-generators-with-yield">Async generators with yield <a class="direct-link" href="#async-generators-with-yield">#</a></h5>
<p>Example of fetching data from a list of URL's and pusing the responses as they come back. Lazy pushing allows lazy consumption.</p>
<pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">fetchURLs</span><span class="token punctuation">(</span><span class="token parameter">urls</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> url <span class="token keyword">of</span> urls<span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">let</span> resp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token keyword">await</span> resp<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">yield</span> text<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      <span class="token keyword">yield</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h5 id="lazy-async-iteration">Lazy async iteration <a class="direct-link" href="#lazy-async-iteration">#</a></h5>
<p>Calling an <code>async</code> generator returns a special type of iterator that allows us to consume data as they become available. We can't really use a <code>for...of</code> loop with an async generator because the async iterator returns a promise for an iterator, not the result itself.</p>
<pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter">favoriteSites</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> it <span class="token operator">=</span> <span class="token function">fetchURLS</span><span class="token punctuation">(</span> favoriteSites <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fatchURLS is a generator that returns an iterator</span><br>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> text <span class="token operator">=</span> res<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> text <span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Writing that code is less than ideal so they added the <code>for await...of</code> loop for async iteration. This allows us to await the iterator result before moving on to continue the iteration:</p>
<pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter">favoriteSites</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> text <span class="token keyword">of</span> <span class="token function">fetchURLs</span><span class="token punctuation">(</span> favoriteSites <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>


<p><a href="/blog/">← Home</a></p>

    </main>

    <footer></footer>

    <!-- Current page: /blog/posts/may-13-2020/ -->
  </body>
</html>
